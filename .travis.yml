language: python

python:
    - "2.7"

os:
    - linux

cache:
    apt: true
    pip: true

sudo: false

addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
        packages:
            - gcc-5
            - g++-5
            - libfftw3-dev

before_install:
    - pip install cffi

before_script:
    - mkdir -p ims-cpp/build
    - cd ims-cpp/build
    - cmake -DCMAKE_C_COMPILER='gcc-5' -DCMAKE_CXX_COMPILER='g++-5' ..
    - make ms_cffi
    - cd ../../
    - python setup.py build_egg
    - 'easy_install -U dist/*.egg'

script:
    - py.test test/
